<body bgcolor=0 text=snow>
<canvas id=R width=64 height=64 style=width:2in;height:2in;background:#fff>
<script>
t=0;
setInterval(function() {
    t++;
    K = R.getContext('2d')
    I = K.getImageData(0,0,q=64,q);
    inc = 1/32
    for(i=y=-1;y<1;y+=inc) {
        for(x=-1;x<1;x+=inc,I.data[i+=4]=h+h) {
            //prepare things
            dx = x/127
            dy = y/127
            dz = -8/127;
            X=0.1*Math.cos(t*0.1)
            Y=0.1*Math.sin(t*0.04)
            Z=7
            //now raycast
            m = 64
            for(h=127;--h && m>0.1 ; X+=dx, Y+=dy, Z+=dz){
                //m = Math.sqrt(X*X+Y*Y+Z*Z) - 0.1;
                dd = 0.3
                abs = Math.abs
                m =  abs(X-dd)
                m =  Math.min(abs(Y-dd), m);
                m =  Math.min(abs(X+dd), m);
                m =  Math.min(abs(Y+dd), m);
            }
            
        }
    }
    K.putImageData(I,0,0);
}, 10);

/*
N=[K=R.getContext('2d')];
for(t=B=127,I=K.getImageData(0,0,q=64,q);t--;$=Math.cos)
    N[t]=t/43&1;
alert(N)
setInterval("
    t++;
    for(i=y=-1;y<1;y+=A)
        for(x=-1;x<1;x+=A=1/32,I.data[i+=4]=h+h)
            for(
                a = t/86
                C = cos(a), 
                S = cos(a+8),
                m = C
                b = t/127
                c = cos(b),
                s = cos(b+8),
                u = x*C + S,
                v = y*c - u*s,
                u = u*c + y*s,
                w = C - x*S,
                X = q + 9*cos(a+b),
                Y = q + 9*cos(b-a)
                Z = t
                h = 127
                    ;--h && m < 64
                        ;
                        X+=u,
                        Y+=v,
                        Z+=w)
                for(m=1;N[X*m&B]+N[Y*m&B]+N[Z*m&B]<2&&m<q;m*=3);
    K.putImageData(I,0,0)",9)>
*/
</script>
</body>
